

os: linux
sudo: required
dist: trusty

notifications:
  email: false

language: C++

matrix:
  include:
    - os: linux
      sudo: required
      dist: trusty
      env: TESTOS="LINUX"
    - os: osx
      sudo: required
      env: TESTOS="OSX"

cache:
  pip: true
  directories:
    - openmpi-2.1.1

before_install:
  - bash UnitTests/travis_before_install.sh

script:
  - cd Build
  - if [[ "$TRAVIS_OS_NAME" == "LINUX" ]]; |
    cmake -DCMAKE_TOOLCHAIN_FILE=../Targets/Linux.cmake ..; |
    fi
  - if [[ "$TRAVIS_OS_NAME" == "OSX" ]]; |
    cmake -DCMAKE_TOOLCHAIN_FILE=../Targets/Mac-python3.cmake ..; |
    fi
  - make
  - travis_wait 30 make test > test_result.txt
  - tail -n 13 Testing/Temporary/LastTest.log
  - cd ../UnitTests/
  - bash travis_check_examples.sh

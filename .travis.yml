

os: linux
sudo: required
dist: trusty

notifications:
  email: false

language: C++

matrix:
  include:
    - os: linux
      sudo: required
      dist: trusty
      env: TESTOS="LINUX"
    - os: osx
      sudo: required
      env: TESTOS="OSX"

cache:
  pip: true
  directories:
    - openmpi-3.0.1

before_install:
  - bash UnitTests/travis_before_install.sh

script:
  - cd Build
  - 'if [[ "$TESTOS" == "LINUX" ]]; then
        cmake -DCMAKE_TOOLCHAIN_FILE=../Targets/Linux.cmake .. ;
     else
        cmake -DCMAKE_TOOLCHAIN_FILE=../Targets/Mac-python3.cmake .. ;
     fi'
  - make
  - travis_wait 30 make test > test_result.txt
  - tail -n 13 Testing/Temporary/LastTest.log
  - cd ../UnitTests/
  - bash travis_check_examples.sh

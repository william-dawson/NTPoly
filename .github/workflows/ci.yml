name: CI

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: setup environment
      run: bash UnitTests/travis_before_install.sh
      env:
        TESTOS: "LINUX" 
    - name: build ntpoly
      run: |
        cd Build
        bash ../UnitTests/travis_run_cmake.sh
        make
        cd ../
      env:
        TESTOS: LINUX
    - name: regression tests
      run: |
        cd Build
        eval "$MAKETEST"
        cd ../
      env:
        MAKETEST: "make test"
    - name: check examples
      run: |
        cd UnitTests
        bash travis_check_examples.sh
        cd ../
      env:
        TESTEXAMPLES: 1
    - name: lint
      run: |
        cd UnitTests
        bash travis_lint.sh
        cd ../
